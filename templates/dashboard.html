{% extends 'base.html' %}

{% block content %}
<div class="container">

    <!-- HEADER -->
    <h2>Welcome, {{ request.user.username }} ðŸ‘‹</h2>
    <p style="color:#9ca3af;">Hereâ€™s your health overview</p>

    <!-- SUMMARY CARDS -->
    <div class="dashboard-cards">

        <!-- BMI VALUE -->
        <div class="dashboard-card">
            <h3>Latest BMI</h3>
            {% if latest %}
                <p>{{ latest.bmi_value }}</p>
            {% else %}
                <p>â€”</p>
            {% endif %}
        </div>

        <!-- CATEGORY -->
        <div class="dashboard-card">
            <h3>Category</h3>
            {% if latest %}
                <p>{{ latest.category }}</p>
            {% else %}
                <p>â€”</p>
            {% endif %}
        </div>

        <!-- TOTAL RECORDS -->
        <div class="dashboard-card">
            <h3>Total Records</h3>
            <p>{{ records|length }}</p>
        </div>

    </div>

    <!-- ACTION -->
    <a href="{% url 'bmi' %}" class="btn-primary" style="display:inline-block; margin:20px 0;">
    Calculate New BMI
    </a>


    <!-- HISTORY TABLE -->
    <h3 style="margin-top:40px;">Recent BMI History</h3>

    <div class="table-card">
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>BMI</th>
                    <th>Category</th>
                </tr>
            </thead>
            <tbody>
                {% for record in records %}
                <tr>
                    <td>{{ record.created_at|date:"d-m-Y" }}</td>
                    <td>{{ record.bmi_value }}</td>
                    <td>{{ record.category }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3">No BMI records yet</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}
